var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,c=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,s=(e,t)=>{for(var a in t||(t={}))l.call(t,a)&&c(e,a,t[a]);if(r)for(var a of r(t))n.call(t,a)&&c(e,a,t[a]);return e},o=(e,t)=>{var a={};for(var c in e)l.call(e,c)&&t.indexOf(c)<0&&(a[c]=e[c]);if(null!=e&&r)for(var c of r(e))t.indexOf(c)<0&&n.call(e,c)&&(a[c]=e[c]);return a};import{R as i,C as m,D as u,a as d,b as E,c as p,d as v,F as b,e as N,f}from"./vendor.e4aaed70.js";function h(e){var t=o(e,[]);return i.createElement("section",{className:"banner"},i.createElement("i",null," ",t.icon),i.createElement("p",{className:"multiline"},t.message),t.children)}function y(e){var t=o(e,[]);const{title:a,url:r,addTime:l,status:n,deleteAction:c,isDeleted:s}=t,d=(e=>{switch(e){case"OK":return{value:"AVAILABLE",type:"success"};case"FAIL":return{value:"FAILED",type:"error"};case"UNKNOWN":return{value:"UNKNOWN",type:"unknown"}}})(n);return i.createElement("article",{className:"card-wrapper "+(s?"removed-item":"")},i.createElement("header",{className:"card-header"},i.createElement("i",{"aria-label":"icon",className:"icon"},i.createElement(m,null)),i.createElement("section",{"aria-roledescription":`Status of ${a} service`,"aria-label":d.value,className:`pill ${d.type}-pill`},d.value)),i.createElement("h4",{"aria-label":"Title",className:"title"},a),i.createElement("p",{"aria-label":"Service URL",className:"text"}," ",i.createElement("span",{className:"text-label"}," URL:")," ",r),i.createElement("p",{className:"text-label","aria-label":"Service Creation Time"},"Created At: "),i.createElement("p",null,l),i.createElement("i",{onClick:c,className:"font-medium icon danger"},i.createElement(u,null)))}const w=e=>e.show?i.createElement("aside",{className:"backdrop"}):null;const S=e=>(d.exports.useEffect((()=>{const t=t=>{27===t.keyCode&&e.modalClosed(t)};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)}),[]),i.createElement("section",null,i.createElement(w,{show:e.show,clicked:e.modalClosed}),i.createElement("main",{"aria-modal":"true",className:"modal",style:{transform:e.show?"translateY(0)":"translateY(-100vh)",opacity:e.show?1:0}},i.createElement("i",{"aria-label":"Close",onClick:e.modalClosed,className:"btn-close"},i.createElement(E,null)),e.children))),C="/service";async function I(){try{const e=await p({url:C});return e.data.map((e=>{return r=s({},e),l={addTime:v(e.addTime).format("YYYY-MM-DD HH:mm:ss"),isDeleted:!1,isErrored:!1},t(r,a(l));var r,l}))}catch(e){return null}}function g(){const[e,t]=d.exports.useState([]),[a,r]=d.exports.useState(!1),[l,n]=d.exports.useState(!1),[c,o]=d.exports.useState("INITIALIZED"),m=async()=>{const e=await I();t(e),r(!0)},u=e=>{e.preventDefault(),n(!1),o("INITIALIZED")},E=e=>{e.preventDefault(),n(!0)},v=async(t,a)=>{t.preventDefault();try{await async function(e){const t={name:e};return(await p.delete(C,s({data:t},{headers:{"Content-Type":"application/json"}}))).data}(e[a].name)}catch(r){console.error(r),console.log("Error in deleting service"),alert("Error in deleting service")}m()},f=async e=>{e.preventDefault();const t=new FormData(e.target),a={serviceName:t.get("name"),serviceUrl:t.get("url")};try{await async function(e){const t={name:e.serviceName,url:e.serviceUrl};return(await p.post(C,s({},t),{headers:{"Content-Type":"application/json"}})).data}(a),o("SUCCESS")}catch(r){o("ERROR")}m()};return d.exports.useEffect((()=>{m()}),[]),i.createElement("main",{className:"module-wrapper"},i.createElement("section",{className:"nav"},i.createElement("nav",{className:"nav-item"},(null==e?void 0:e.length)>0&&i.createElement("button",{tabIndex:0,role:"button","aria-label":"Add Item Button",onClick:E,className:"btn"},"Add Service +"))),a&&((w=e)?w.length>0?i.createElement("ul",{className:"services-wrapper"},w.map(((e,t)=>{const{name:a,url:r,addTime:l,status:n}=e;return i.createElement("li",{key:`${t}-${a}`},i.createElement(y,{title:a,url:r,addTime:l,status:n,deleteAction:e=>v(e,t)}))}))):i.createElement(h,{message:"There seem to be no services created in the dashboard.",icon:i.createElement(b,null)},i.createElement("button",{tabIndex:0,role:"button","aria-label":"Add Item Button",onClick:E,className:"btn"},"Add Service +")):i.createElement(h,{message:"We have encountered a problem with our service.",icon:i.createElement(N,null)})),i.createElement(S,{show:l,modalClosed:u},i.createElement("section",{style:{color:"black"}},(e=>{switch(e){case"INITIALIZED":return i.createElement("section",{className:"form-wrapper"},i.createElement("h3",null,"Create Service"),i.createElement("form",{onSubmit:f},i.createElement("label",{htmlFor:"name"},"Enter username"),i.createElement("input",{"aria-placeholder":"Service Name","aria-label":"Service Name",placeholder:"Service Name",type:"text",name:"name",required:!0}),i.createElement("label",{htmlFor:"url"},"Enter username"),i.createElement("input",{"aria-placeholder":"Service URL","aria-label":"Service URL",placeholder:"Service URL",type:"url",name:"url",required:!0}),i.createElement("div",{className:"btn-group"},i.createElement("input",{role:"button",type:"submit",className:"btn",value:"Submit"}),i.createElement("button",{className:"btn",onClick:u},"Cancel"))));case"SUCCESS":return i.createElement("section",{className:"response-message success"},"ðŸŽ‰ Service Created Successfully ðŸŽ‰");case"ERROR":return i.createElement("section",{className:"response-message error"},"Error in creating service ! Try again later.");default:return null}})(c))));var w}function A(){return i.createElement("div",{className:"App"},i.createElement("header",{className:"App-header"},"SERVICE DASHBOARD"),i.createElement(g,null))}f.render(i.createElement(i.StrictMode,null,i.createElement(A,null)),document.getElementById("root"));
